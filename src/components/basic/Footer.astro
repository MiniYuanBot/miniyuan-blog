---
// The <Footer /> component is employed to create consistent html footer.
import { Icon } from "../ui";

const today = new Date();
---

<footer
	class="py-8 px-4 pb-24 text-center bg-gradient-to-b from-background to-gray-light text-muted-foreground"
>
	&copy; {today.getFullYear()} miniyuan. All rights reserved.

	<div class="flex justify-center gap-4 mt-4">
		<!-- github -->
		<a
			class="text-muted-foreground/60 no-underline transition-colors hover:text-gray-dark"
			href="https://github.com/MiniYuanBot"
			target="_blank"
		>
			<Icon
				name="github"
				variant="fill"
				class="size-8"
				aria-hidden="true"
			/>
			<span class="sr-only">Go to miniyuan's GitHub repo</span>
		</a>

		<!-- email -->
		<button
			class="text-muted-foreground/60 hover:text-gray-dark transition-colors"
			data-clipboard="miniyuan@stu.pku.edu.cn"
			data-label="email"
		>
			<Icon
				name="email"
				variant="stroke"
				class="size-6"
				aria-hidden="true"
			/>
			<span class="sr-only">miniyuan@stu.pku.edu.cn</span>
		</button>

		<!-- telephone -->
		<button
			class="text-muted-foreground/60 hover:text-gray-dark transition-colors"
			data-clipboard="+86 188 1312 3558"
			data-label="telephone"
		>
			<Icon
				name="phone"
				variant="stroke"
				class="size-6"
				aria-hidden="true"
			/>
			<span class="sr-only">+86 188 1312 3558</span>
		</button>
	</div>
</footer>

<script is:inline>
	document.querySelectorAll("[data-clipboard]").forEach((btn) => {
		btn.addEventListener("click", async () => {
			const text = btn.getAttribute("data-clipboard");
			const label = btn.getAttribute("data-label");

			try {
				await navigator.clipboard.writeText(text);
				document.dispatchEvent(
					new CustomEvent("toast", {
						detail: {
							message: `${label} copied to clipboard`,
							time: 2000,
						},
					}),
				);
			} catch (err) {
				document.dispatchEvent(
					new CustomEvent("toast", {
						detail: {
							message: "Copy failed, please copy manually",
							time: 2000,
						},
					}),
				);
			}
		});
	});
</script>
