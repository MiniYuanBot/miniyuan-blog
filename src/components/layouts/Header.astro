---
// The <Header /> component is employed to create consistent html header.

import { SITE_TITLE } from "@/consts";
import TextLink from "./TextLink.astro";
import IconLink from "./IconLink.astro";

const HomeIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>`;

const SearchIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>`;

// Left: site title
const navLeft = { path: "/", label: SITE_TITLE };

const navCenter = [
	// Center: important text link
	{ path: "/blog", label: "Blog" },
	{ path: "/tags", label: "Tags" },
	{ path: "/links", label: "Links" },
	{ path: "/about", label: "About" },
];

const navRight = [
	// Right: trivial icon link
	{
		path: "/",
		label: "Home",
		svg: HomeIcon,
		type: "icon",
		isExternal: false,
	},
	{
		path: "/search",
		label: "Search",
		svg: SearchIcon,
		type: "icon",
		isExternal: true,
	},
];
---

<header>
	<nav>
		<!-- Left: site title -->
		<div class="nav-section nav-left">
			<h2>
				<a href={navLeft.path} aria-label={navLeft.label}>
					{SITE_TITLE}
				</a>
			</h2>
		</div>
		<!-- Center: important text link -->
		<div class="nav-section nav-center">
			{
				navCenter.map((item) => (
					<TextLink href={item.path} aria-label={item.label}>
						{/* Center items only display text. */}
						<span class="nav-label">{item.label}</span>
					</TextLink>
				))
			}
		</div>
		<!-- Right: trivial icon link -->
		<div class="nav-section nav-right">
			{
				navRight.map(({ path, label, svg, isExternal }) => (
					<IconLink href={path} label={label} isExternal={isExternal}>
						<span
							class="nav-icon"
							aria-hidden="true"
							set:html={svg}
						/>
					</IconLink>
				))
			}
		</div>
	</nav>
</header>

<style>
	header {
		margin: 0;
		padding: 0 1em;
		background: white;
		box-shadow: 0 2px 8px rgba(var(--black), 5%);
	}

	nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
		min-height: 60px;
	}

	nav a {
		padding: 1em 0.75em;
		color: var(--black);
		text-decoration: none;
		display: flex;
		align-items: center;
	}

	h2 {
		margin: 0;
		font-size: 1.25em;
	}

	h2 a,
	h2 a.active {
		text-decoration: none;
		color: inherit;
	}

	.nav-section {
		display: flex;
		align-items: center;
	}

	.nav-left {
		justify-content: flex-start;
		flex: 0 0 auto; /* fixed width */
	}

	.nav-center {
		justify-content: center;
		flex: 1;
	}

	.nav-right {
		justify-content: flex-end;
		flex: 0 0 auto; /* fixed width */
	}

	.nav-center .nav-label {
		white-space: nowrap; /* prevent text wrapping */
	}

	.nav-right .nav-icon {
		width: 1.5em;
		height: 1.5em;
	}

	/* 移动端响应式调整 */
	@media (max-width: 768px) {
	}

	/* 桌面端增强 */
	@media (min-width: 769px) {
		/* 可选的悬停提示 */
		.nav-right a:not(.social-links a):hover {
			position: relative;
		}

		.nav-right a:not(.social-links a):hover::after {
			content: attr(aria-label);
			position: absolute;
			top: 100%;
			left: 50%;
			transform: translateX(-50%);
			background: #333;
			color: white;
			padding: 0.25em 0.5em;
			border-radius: 4px;
			font-size: 0.75rem;
			white-space: nowrap;
			z-index: 10;
		}
	}

	/* 无障碍隐藏文本 */
	.sr-only {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		white-space: nowrap;
		border: 0;
	}
</style>
